= Troubleshooting in DataWeave

image:dw-logo.png[dw]

== Cannot coerce :binary to :object

It means that DataWeave is trying to transform a binary value to object.

*Cause*: One possible case is that data weave read the content as binary as it was a InputStream or Byte array and the mime type was not set.
And in this scenario DataWeave defaults to Java reader. You should see a Info log with something like :

 "MimeType was not resolved '*/*' delegating to Java."

*Solution* : Validate that the mimeType is set.
For example verify that if you data source has a mime-type field it was set or if the value was set through a set-payload or set-variable the mime-type property was defined

== Cannot coerce :string to :object

It means that DataWeave is trying to transform a string value to object.

*Cause*: Same as :binary issue this may be a mime-type problem.

*Cause*: If the value is an XML this may be caused by an empty tag. By default XML reader reads

Let's use an example

.Input

[source,xml]
----
<user></user>
----

.Transform

[source,groovy]
----
payload.user.name
----

This script will fail with *Cannot coerce :string to :object*

*Reason*: As you can see the input xml is an empty xml tag so the expression *payload.user* returns an empty string
and then DataWeave tries to apply the name selector over a string.

*Solution*: Xml reader has a configuration property named nullValueOn. This property can be set to "blank" or "empty" and it will fix this issue.
